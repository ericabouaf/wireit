<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
WireIt Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="Terminal.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b>WireIt</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>Terminal.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		Terminals represent the end points of the "wires"<BR/><BR/>
	
</p>

<hr>


    <table border="1" cellpadding="3" cellspacing="0" width="100%">
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
    <td colspan=2><font size="+2">
    
        <b>Class Summary</b>
    
    </font></td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="WireIt/DDTerminal.html">WireIt.DDTerminal</a></b></td>
    <td>WireIt.DDTerminal
 </td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="WireIt/Terminal.html">WireIt.Terminal</a></b></td>
    <td>WireIt.Terminal
 </td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="WireIt/util/TerminalInput.html">WireIt.util.TerminalInput</a></b></td>
    <td>WireIt.util.TerminalInput
 </td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="WireIt/util/TerminalOutput.html">WireIt.util.TerminalOutput</a></b></td>
    <td>WireIt.util.TerminalOutput
 </td>
    </tr>
    
    </table>
    <hr/> 


<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">/**
 * <span class="attrib">@fileoverview</span> Terminals represent the end points of the "wires"
 */</span>
<span class="comment">/**
 * This class is used for wire edition. It inherits from YAHOO.util.DDProxy and acts as a "temporary" Terminal.
 *
 * <span class="attrib">@class</span> WireIt.DDTerminal
 * <span class="attrib">@extends</span> YAHOO.util.DDProxy
 * <span class="attrib">@constructor</span>
 * <span class="attrib">@param</span> {WireIt.Terminal} terminal Parent terminal
 * <span class="attrib">@param</span> {Object} config Configuration object (see in properties for details)
 */</span>
WireIt.DDTerminal = <span class="reserved">function</span>(terminal, config) {
   
   <span class="comment">/**
    * Reference to the terminal parent
    */</span>
   <span class="reserved">this</span>.terminal = terminal;
   
   <span class="comment">/**
    * Object containing the configuration object
    * &lt;ul&gt;
    *   &lt;li&gt;type: 'type' of this terminal. If no "allowedTypes" is specified in the config, the terminal will only connect to the same type of terminal&lt;/li&gt;
    *   &lt;li&gt;allowedTypes: list of all the allowed types that we can connect to.&lt;/li&gt;
    * &lt;/ul&gt;
    */</span>
   <span class="comment">// WARNING: the object config cannot be called "config" because YAHOO.util.DDProxy already has a "config" property</span>
   <span class="reserved">this</span>.termConfig = config || {};
   
   <span class="comment">// Init the DDProxy</span>
   WireIt.DDTerminal.superclass.constructor.call(<span class="reserved">this</span>,<span class="reserved">this</span>.terminal.el);
   
   <span class="comment">// On mouseover/mouseout to display/hide the scissors</span>
   YAHOO.util.Event.addListener(<span class="reserved">this</span>.terminal.el, <span class="literal">"mouseover"</span>, <span class="reserved">this</span>.mouseOver, <span class="reserved">this</span>, true);
   YAHOO.util.Event.addListener(<span class="reserved">this</span>.terminal.el, <span class="literal">"mouseout"</span>, <span class="reserved">this</span>.mouseOut, <span class="reserved">this</span>, true);
   
};

<span class="comment">// Mode Intersect to get the DD objects</span>
YAHOO.util.DDM.mode = YAHOO.util.DDM.INTERSECT;

YAHOO.extend(WireIt.DDTerminal,YAHOO.util.DDProxy,{
   
   scissorOver: <span class="reserved">function</span>() {
      <span class="comment">// Stop that.terminalTimeout</span>
      clearTimeout(<span class="reserved">this</span>.terminalTimeout);
   },
   
   scissorOut: <span class="reserved">function</span>() {
      var that = <span class="reserved">this</span>;
      <span class="reserved">this</span>.terminalTimeout = setTimeout(<span class="reserved">function</span>() {
         <span class="reserved">if</span>(that.scissor) {
            that.terminal.parentEl.parentNode.removeChild(that.scissor);
            that.scissor = undefined;
         }
      }, 500);
   },
   
   scissorClick: <span class="reserved">function</span>() {
      <span class="reserved">while</span>(<span class="reserved">this</span>.terminal.wires.length &gt; 0) {
         <span class="reserved">this</span>.terminal.wires[0].remove();
      }
      <span class="reserved">if</span>(<span class="reserved">this</span>.scissor) {
         <span class="reserved">this</span>.terminal.parentEl.parentNode.removeChild(<span class="reserved">this</span>.scissor);
         <span class="reserved">this</span>.scissor = undefined;
      }
   },
   
   initCissor: <span class="reserved">function</span>() {
      <span class="comment">// Position of the scissor</span>
      var termPos = <span class="reserved">this</span>.terminal.getXY();
      var position = [termPos[0]+<span class="reserved">this</span>.terminal.config.direction[0]*30-13,termPos[1]+<span class="reserved">this</span>.terminal.config.direction[1]*30-10];
   
      <span class="comment">// Display the cut button</span>
      <span class="reserved">this</span>.scissor = WireIt.cn(<span class="literal">'div'</span>, {className: <span class="literal">"WireIt-Wire-scissors"</span>}, {left: position[0]+<span class="literal">"px"</span>,top: position[1]+<span class="literal">"px"</span>} );
      <span class="reserved">this</span>.terminal.parentEl.parentNode.appendChild(<span class="reserved">this</span>.scissor);
      
      <span class="comment">// Ajoute un listener sur le scissor:</span>
      YAHOO.util.Event.addListener(<span class="reserved">this</span>.scissor, <span class="literal">"mouseover"</span>, <span class="reserved">this</span>.scissorOver, <span class="reserved">this</span>, true);
      YAHOO.util.Event.addListener(<span class="reserved">this</span>.scissor, <span class="literal">"mouseout"</span>, <span class="reserved">this</span>.scissorOut, <span class="reserved">this</span>, true);
      
      <span class="comment">// On click : kill all wires !!!</span>
      YAHOO.util.Event.addListener(<span class="reserved">this</span>.scissor, <span class="literal">"click"</span>, <span class="reserved">this</span>.scissorClick, <span class="reserved">this</span>, true);
   },
   
   mouseOver: <span class="reserved">function</span>() {
      <span class="reserved">if</span>(!<span class="reserved">this</span>.scissor) {
         <span class="reserved">if</span>(<span class="reserved">this</span>.terminal.wires.length &gt; 0)  {
            <span class="reserved">this</span>.initCissor();
         }
      }
   },
   
   mouseOut: <span class="reserved">function</span>() {
      
         var that = <span class="reserved">this</span>;
         <span class="reserved">this</span>.terminalTimeout = setTimeout(<span class="reserved">function</span>() {
            <span class="reserved">if</span>(that.scissor) {
               that.terminal.parentEl.parentNode.removeChild(that.scissor);
               that.scissor = undefined;
            }
         }, 300);
         
   },
   
   startDrag: <span class="reserved">function</span>() {
      
      <span class="comment">// If only one wire admitted, we remove the previous wire</span>
      <span class="reserved">if</span>(<span class="reserved">this</span>.terminal.config.nMaxWires == 1 &amp;&amp; <span class="reserved">this</span>.terminal.wires.length == 1) {
         <span class="reserved">this</span>.terminal.wires[0].remove();
      }
      <span class="comment">// If the number of wires is at its maximum, prevent editing...</span>
      <span class="reserved">else</span> <span class="reserved">if</span>(<span class="reserved">this</span>.terminal.wires.length &gt;= <span class="reserved">this</span>.terminal.config.nMaxWires) {
         <span class="reserved">return</span>;
      }
      
      <span class="reserved">this</span>.fakeTerminal = {
         config: {direction: <span class="reserved">this</span>.terminal.config.fakeDirection},
         pos: [200,200], 
         offset: [<span class="reserved">this</span>.terminal.parentEl.parentNode.offsetLeft-<span class="reserved">this</span>.terminal.parentEl.parentNode.scrollLeft, 
                  <span class="reserved">this</span>.terminal.parentEl.parentNode.offsetTop-<span class="reserved">this</span>.terminal.parentEl.parentNode.scrollTop],
         addWire: <span class="reserved">function</span>() {},
         removeWire: <span class="reserved">function</span>() {},
         getXY: <span class="reserved">function</span>() { 
            <span class="reserved">return</span> [<span class="reserved">this</span>.pos[0]-<span class="reserved">this</span>.offset[0], <span class="reserved">this</span>.pos[1]-<span class="reserved">this</span>.offset[1] ]; 
         }
      };
      
      <span class="reserved">this</span>.editingWire = new WireIt.Wire(<span class="reserved">this</span>.terminal, <span class="reserved">this</span>.fakeTerminal, <span class="reserved">this</span>.terminal.parentEl.parentNode, <span class="reserved">this</span>.terminal.config.editingWireConfig);
      YAHOO.util.Dom.addClass(<span class="reserved">this</span>.editingWire.el, <span class="literal">'WireIt-Wire-editing'</span>);
   },
   
   onDrag: <span class="reserved">function</span>(e) {
      <span class="reserved">this</span>.fakeTerminal.pos = [e.clientX, e.clientY];
      <span class="reserved">this</span>.editingWire.redraw();
   },
   
   endDrag: <span class="reserved">function</span>(e) {
      <span class="reserved">this</span>.editingWire.remove();
      <span class="reserved">this</span>.editingWire = null;
   },
   
   onDragEnter: <span class="reserved">function</span>(e,ddTargets) {
      <span class="reserved">for</span>(var i = 0 ; i &lt; ddTargets.length ; i++) {
         <span class="reserved">if</span>( <span class="reserved">this</span>.isValidWireTerminal(ddTargets[i]) ) {
            ddTargets[i].terminal.setDropInvitation(true);
         }
      }
   },
   
   onDragOut: <span class="reserved">function</span>(e,ddTargets) { 
      <span class="reserved">for</span>(var i = 0 ; i &lt; ddTargets.length ; i++) {
         <span class="reserved">if</span>( <span class="reserved">this</span>.isValidWireTerminal(ddTargets[i]) ) {
            ddTargets[i].terminal.setDropInvitation(false);
         }
      }
   },
   
   onDragDrop: <span class="reserved">function</span>(e,ddTargets) {
      <span class="reserved">this</span>.onDragOut(e,ddTargets);
      
      var targetDDTerminal = null;
      <span class="reserved">for</span>(var i = 0 ; i &lt; ddTargets.length ; i++) {
         <span class="reserved">if</span>( ddTargets[i].isWireItTerminal ) {
            targetDDTerminal =  ddTargets[i];
         }
      }
      
      <span class="comment">// Connect to the FIRST target terminal</span>
      <span class="reserved">if</span>( targetDDTerminal ) {
         <span class="reserved">if</span>( <span class="reserved">this</span>.isValidWireTerminal(targetDDTerminal) ) { 
               
            <span class="comment">// Don't create the wire if it already exists between the 2 terminals !!</span>
            var termAlreadyConnected = false;
            <span class="reserved">for</span>(var i = 0 ; i &lt; <span class="reserved">this</span>.terminal.wires.length ; i++) {
               <span class="reserved">if</span>(<span class="reserved">this</span>.terminal.wires[i].terminal1 == <span class="reserved">this</span>.terminal) {
                  <span class="reserved">if</span>( <span class="reserved">this</span>.terminal.wires[i].terminal2 == targetDDTerminal.terminal) {
                     termAlreadyConnected = true;
                     break;
                  }
               }
               <span class="reserved">else</span> <span class="reserved">if</span>(<span class="reserved">this</span>.terminal.wires[i].terminal2 == <span class="reserved">this</span>.terminal) {
                  <span class="reserved">if</span>( <span class="reserved">this</span>.terminal.wires[i].terminal1 == targetDDTerminal.terminal) {
                     termAlreadyConnected = true;
                     break;
                  }
               }
            }
            
            <span class="comment">// Create the wire only if the terminals aren't connected yet</span>
            <span class="reserved">if</span>(!termAlreadyConnected) {
               <span class="comment">// Check the number of wires for this terminal</span>
               <span class="reserved">if</span>( targetDDTerminal.terminal.config.nMaxWires == 1) {
                  <span class="reserved">if</span>(targetDDTerminal.terminal.wires.length &gt; 0) {
                     targetDDTerminal.terminal.wires[0].remove();
                  }
                  var w = new WireIt.Wire(<span class="reserved">this</span>.terminal, targetDDTerminal.terminal, <span class="reserved">this</span>.terminal.parentEl.parentNode, <span class="reserved">this</span>.terminal.config.wireConfig);
                  w.redraw();
               }
               <span class="reserved">else</span> <span class="reserved">if</span>(targetDDTerminal.terminal.wires.length &lt; targetDDTerminal.terminal.config.nMaxWires) {
                  var w = new WireIt.Wire(<span class="reserved">this</span>.terminal, targetDDTerminal.terminal, <span class="reserved">this</span>.terminal.parentEl.parentNode, <span class="reserved">this</span>.terminal.config.wireConfig);
                  w.redraw();
               }
               <span class="reserved">else</span> {
                  <span class="comment">//console.log("Cannot connect to this terminal: nMaxWires = ", ddTargets[0].terminal.config.nMaxWires);</span>
               }
            }
            <span class="reserved">else</span> {
               <span class="comment">//console.log("terminals already connected ");</span>
            }
         }
      }
      
   },
   
   
   <span class="comment">// Distinct from other YAHOO.util.DragDrop objects</span>
   isWireItTerminal: true,
   
   isValidWireTerminal: <span class="reserved">function</span>(DDterminal) {
      
      <span class="reserved">if</span>( !DDterminal.isWireItTerminal ) {
         <span class="reserved">return</span> false;
      }
      
      <span class="comment">// If this terminal has the type property:</span>
      <span class="reserved">if</span>(<span class="reserved">this</span>.termConfig.type) {
         <span class="reserved">if</span>(<span class="reserved">this</span>.termConfig.allowedTypes) {
            <span class="reserved">if</span>( <span class="reserved">this</span>.termConfig.allowedTypes.indexOf(DDterminal.termConfig.type) == -1 ) {
               <span class="reserved">return</span> false;
            }
         }
         <span class="reserved">else</span> {
            <span class="reserved">if</span>(<span class="reserved">this</span>.termConfig.type != DDterminal.termConfig.type) {
               <span class="reserved">return</span> false;
            }
         }
      }
      <span class="comment">// The other terminal may have type property too:</span>
      <span class="reserved">else</span> <span class="reserved">if</span>(DDterminal.termConfig.type) {
         <span class="reserved">if</span>(DDterminal.termConfig.allowedTypes) {
            <span class="reserved">if</span>( DDterminal.termConfig.allowedTypes.indexOf(<span class="reserved">this</span>.termConfig.type) == -1 ) {
               <span class="reserved">return</span> false;
            }
         }
         <span class="reserved">else</span> {
            <span class="reserved">if</span>(<span class="reserved">this</span>.termConfig.type != DDterminal.termConfig.type) {
               <span class="reserved">return</span> false;
            }
         }
      }
      
      <span class="reserved">return</span> true;
   }
   
});


   

<span class="comment">/**
 * <span class="attrib">@class</span> WireIt.Terminal
 * <span class="attrib">@constructor</span>
 * <span class="attrib">@param</span> {DomEl} parentEl Element that will contain the terminal
 * <span class="attrib">@param</span> {Object} config Configuration object
 * <span class="attrib">@param</span> {WireIt.Container} container (Optional) Container containing this terminal
 */</span>
WireIt.Terminal = <span class="reserved">function</span>(parentEl, config, container) {
   
   <span class="comment">/**
    * DOM parent element
    */</span>
   <span class="reserved">this</span>.parentEl = parentEl;
   
   <span class="comment">/**
    * Container (optional). Parent container of this terminal
    */</span>
   <span class="reserved">this</span>.container = container;
   
   <span class="comment">/**
    * List of the associated wires
    */</span>
    <span class="reserved">this</span>.wires = [];
   
   <span class="comment">/**
    * &lt;p&gt;Object that contains the terminal configuration:&lt;/p&gt;
    * 
    * &lt;ul&gt;
    *   &lt;li&gt;&lt;b&gt;direction&lt;/b: direction vector of the wires when connected to this terminal (default [0,1])&lt;/li&gt;
    *   &lt;li&gt;&lt;b&gt;fakeDirection&lt;/b&gt;: direction vector of the "editing" wire when it started from this terminal (default to -direction)&lt;/li&gt;
    *   &lt;li&gt;&lt;b&gt;editable&lt;/b&gt;: boolean that makes the terminal editable (default to true)&lt;/li&gt;
    *   &lt;li&gt;&lt;b&gt;nMaxWires&lt;/b&gt;: maximum number of wires for this terminal (default to Infinity)&lt;/li&gt;
    *   &lt;li&gt;&lt;b&gt;offsetPosition&lt;/b&gt;: offset position from the parentEl position (default to [0,0])&lt;/li&gt;
    *   &lt;li&gt;&lt;b&gt;ddConfig&lt;/b&gt;: configuration of the WireIt.DDTerminal object (only if editable)&lt;/li&gt;
    *   &lt;li&gt;&lt;b&gt;className&lt;/b&gt;: CSS class name of the terminal (default to "WireIt-Terminal")&lt;/li&gt;
    *   &lt;li&gt;&lt;b&gt;connectedClassName&lt;/b&gt;: CSS class added to the terminal when it is connected (default to "WireIt-Terminal-connected")&lt;/li&gt;
    *   &lt;li&gt;&lt;b&gt;dropinviteClassName&lt;/b&gt;: CSS class added for drop invitation (default to "WireIt-Terminal-dropinvite")&lt;/li&gt;
    * &lt;/ul&gt;
    */</span>  
   <span class="reserved">this</span>.config = config || {};
   <span class="reserved">this</span>.config.direction = <span class="reserved">this</span>.config.direction || [0,1];
   <span class="reserved">this</span>.config.fakeDirection = <span class="reserved">this</span>.config.fakeDirection || [-<span class="reserved">this</span>.config.direction[0],-<span class="reserved">this</span>.config.direction[1]];
   <span class="reserved">this</span>.config.className = <span class="reserved">this</span>.config.className || <span class="literal">'WireIt-Terminal'</span>;
   <span class="reserved">this</span>.config.connectedClassName = <span class="reserved">this</span>.config.connectedClassName || <span class="literal">'WireIt-Terminal-connected'</span>;
   <span class="reserved">this</span>.config.dropinviteClassName = <span class="reserved">this</span>.config.dropinviteClassName || <span class="literal">'WireIt-Terminal-dropinvite'</span>;
   <span class="reserved">this</span>.config.editable = YAHOO.lang.isUndefined(<span class="reserved">this</span>.config.editable) ? true : <span class="reserved">this</span>.config.editable;
   <span class="reserved">this</span>.config.nMaxWires = <span class="reserved">this</span>.config.nMaxWires || Infinity;
   
   <span class="comment">/**
    * Event that is fired when a wire is added
    * You can register this event with myTerminal.eventAddWire.subscribe(function(e,params) { var wire=params[0];}, scope);
    */</span>
   <span class="reserved">this</span>.eventAddWire = new YAHOO.util.CustomEvent(<span class="literal">"eventAddWire"</span>);
   
   <span class="comment">/**
    * Event that is fired when a wire is removed
    * You can register this event with myTerminal.eventRemoveWire.subscribe(function(e,params) { var wire=params[0];}, scope);
    */</span>
   <span class="reserved">this</span>.eventRemoveWire = new YAHOO.util.CustomEvent(<span class="literal">"eventRemoveWire"</span>);
   
   <span class="comment">/**
    * DIV dom element that will display the Terminal
    */</span>
   <span class="reserved">this</span>.el = null;
   
   
   <span class="reserved">this</span>.render();
   
   <span class="comment">// Create the DDTerminal object to make the terminal editable</span>
   <span class="reserved">if</span>(<span class="reserved">this</span>.config.editable) {
      <span class="reserved">this</span>.dd = new WireIt.DDTerminal(<span class="reserved">this</span>, <span class="reserved">this</span>.config.ddConfig);
   }
};

<span class="comment">/**
 * Show or hide the drop invitation. (by adding/removing this.config.dropinviteClassName CSS class)
 * <span class="attrib">@param</span> {Boolean} display Show the invitation if true, hide it otherwise
 */</span>
WireIt.Terminal.<span class="reserved">prototype</span>.setDropInvitation = <span class="reserved">function</span>(display) {
   <span class="reserved">if</span>(display) {
      YAHOO.util.Dom.addClass(<span class="reserved">this</span>.el, <span class="reserved">this</span>.config.dropinviteClassName);
   }
   <span class="reserved">else</span> {
      YAHOO.util.Dom.removeClass(<span class="reserved">this</span>.el, <span class="reserved">this</span>.config.dropinviteClassName);
   }
};

<span class="comment">/**
 * Render the DOM of the terminal
 */</span>
WireIt.Terminal.<span class="reserved">prototype</span>.render = <span class="reserved">function</span>() {
   
   <span class="comment">// Create the DIV element</span>
   <span class="reserved">this</span>.el = WireIt.cn(<span class="literal">'div'</span>, {className: <span class="reserved">this</span>.config.className} );
   
   <span class="comment">// Set the offset position</span>
   <span class="reserved">if</span>(<span class="reserved">this</span>.config.offsetPosition) {
      <span class="reserved">this</span>.el.style.left = <span class="reserved">this</span>.config.offsetPosition[0]+<span class="literal">"px"</span>;
      <span class="reserved">this</span>.el.style.top = <span class="reserved">this</span>.config.offsetPosition[1]+<span class="literal">"px"</span>;
   }
   
   <span class="comment">// Append the element to the parent</span>
   <span class="reserved">this</span>.parentEl.appendChild(<span class="reserved">this</span>.el);
};


<span class="comment">/**
 * Add a wire to this terminal.
 * <span class="attrib">@param</span> {WireIt.Wire} wire Wire instance to add
 */</span>
WireIt.Terminal.<span class="reserved">prototype</span>.addWire = <span class="reserved">function</span>(wire) {
   
   <span class="comment">// Adds this wire to the list of connected wires :</span>
   <span class="reserved">this</span>.wires.push(wire);
   
   <span class="comment">// Set class indicating that the wire is connected</span>
   YAHOO.util.Dom.addClass(<span class="reserved">this</span>.el, <span class="reserved">this</span>.config.connectedClassName);
   
   <span class="comment">// Fire the event</span>
   <span class="reserved">this</span>.eventAddWire.fire(wire);
};

<span class="comment">/**
 * Remove a wire
 * <span class="attrib">@param</span> {WireIt.Wire} wire Wire instance to remove
 */</span>
WireIt.Terminal.<span class="reserved">prototype</span>.removeWire = <span class="reserved">function</span>(wire) {

   var index = <span class="reserved">this</span>.wires.indexOf(wire);   
   <span class="reserved">if</span>( index != -1 ) {
      <span class="reserved">this</span>.wires[index] = null;
      
      <span class="comment">// Compact the wires array:</span>
      var newWires = [];
      <span class="reserved">for</span>(var i = 0 ; i &lt; <span class="reserved">this</span>.wires.length ; i++) {
         <span class="reserved">if</span>(<span class="reserved">this</span>.wires[i]) {
            newWires.push(<span class="reserved">this</span>.wires[i]);
         }
      }
      <span class="reserved">this</span>.wires = newWires;
      
      <span class="comment">// Remove the connected class if it has no more wires:</span>
      <span class="reserved">if</span>(<span class="reserved">this</span>.wires.length == 0) {
         YAHOO.util.Dom.removeClass(<span class="reserved">this</span>.el, <span class="reserved">this</span>.config.connectedClassName);
      }
      
      <span class="comment">// Fire the event</span>
      <span class="reserved">this</span>.eventRemoveWire.fire(wire);
   }
};

<span class="comment">/**
 * get the absolute position of the terminal. (Used by the Wire to redraw itself)
 * <span class="attrib">@returns</span> {Array} pos [x,y] Absolute position of the terminal
 */</span>
WireIt.Terminal.<span class="reserved">prototype</span>.getXY = <span class="reserved">function</span>() {
    var pos = YAHOO.util.Dom.getXY(<span class="reserved">this</span>.el);
    pos[0] += 15-<span class="reserved">this</span>.el.parentNode.parentNode.offsetLeft+<span class="reserved">this</span>.el.parentNode.parentNode.scrollLeft;
    pos[1] += 15-<span class="reserved">this</span>.el.parentNode.parentNode.offsetTop+<span class="reserved">this</span>.el.parentNode.parentNode.scrollTop;
    <span class="reserved">return</span> pos;
};


<span class="comment">/**
 * Remove the terminal from the DOM
 */</span>
WireIt.Terminal.<span class="reserved">prototype</span>.remove = <span class="reserved">function</span>() {
   <span class="comment">// This isn't very nice but...</span>
   <span class="comment">// the method Wire.remove calls Terminal.removeWire to remove the reference</span>
   <span class="reserved">while</span>(<span class="reserved">this</span>.wires.length &gt; 0) {
      <span class="reserved">this</span>.wires[0].remove();
   }
   <span class="reserved">this</span>.parentEl.removeChild(<span class="reserved">this</span>.el);
};



<span class="comment">/**
 * Returns a list of all the terminals connecter to this terminal through its wires.
 * <span class="attrib">@return</span>  {Array}  List of all connected terminals
 */</span>
WireIt.Terminal.<span class="reserved">prototype</span>.getConnectedTerminals = <span class="reserved">function</span>() {
   var terminalList = [];
   <span class="reserved">if</span>(<span class="reserved">this</span>.wires) {
      <span class="reserved">for</span>(var i = 0 ; i &lt; <span class="reserved">this</span>.wires.length ; i++) {
         terminalList.push(<span class="reserved">this</span>.wires[i].getOtherTerminal());
      }
   }
   <span class="reserved">return</span> terminalList;
};


<span class="comment">/**
 * Redraw all the wires connected to this terminal
 */</span>
WireIt.Terminal.<span class="reserved">prototype</span>.redrawAllWires = <span class="reserved">function</span>() {
   <span class="reserved">if</span>(<span class="reserved">this</span>.wires) {
      <span class="reserved">for</span>(var i = 0 ; i &lt; <span class="reserved">this</span>.wires.length ; i++) {
         <span class="reserved">this</span>.wires[i].redraw();
      }
   }
};



 <span class="comment">/**
  * Class that extends Terminal to differenciate Input/Output terminals
  * <span class="attrib">@class</span> WireIt.util.TerminalInput
  * <span class="attrib">@extends</span> WireIt.Terminal
  * <span class="attrib">@constructor</span>
  * <span class="attrib">@param</span> {DOMEl} parentEl Parent dom element
  * <span class="attrib">@param</span> {Object} config configuration object
  * <span class="attrib">@param</span> {WireIt.Container} container (Optional) Container containing this terminal
  */</span>
WireIt.util.TerminalInput = <span class="reserved">function</span>(parentEl, config, container) {
   <span class="reserved">if</span>(!config) { var config = {}; }
   config.direction = [0,-1];
   config.fakeDirection = [0,1];
   config.ddConfig = {
      type: <span class="literal">"input"</span>,
      allowedTypes: [<span class="literal">"output"</span>]
   };
   config.nMaxWires = 1;
   WireIt.util.TerminalInput.superclass.constructor.call(<span class="reserved">this</span>,parentEl, config, container);
};
YAHOO.extend(WireIt.util.TerminalInput, WireIt.Terminal);




 <span class="comment">/**
  * Class that extends Terminal to differenciate Input/Output terminals
  * <span class="attrib">@class</span> WireIt.util.TerminalOutput
  * <span class="attrib">@extends</span> WireIt.Terminal
  * <span class="attrib">@constructor</span>
  * <span class="attrib">@param</span> {DOMEl} parentEl Parent dom element
  * <span class="attrib">@param</span> {Object} config configuration object
  * <span class="attrib">@param</span> {WireIt.Container} container (Optional) Container containing this terminal
  */</span>
WireIt.util.TerminalOutput = <span class="reserved">function</span>(parentEl, config, container) {
  <span class="reserved">if</span>(!config) { var config = {}; }
   config.direction = [0,1];
   config.fakeDirection = [0,-1];
   config.ddConfig = {
      type: <span class="literal">"output"</span>,
      allowedTypes: [<span class="literal">"input"</span>]
   };
   WireIt.util.TerminalOutput.superclass.constructor.call(<span class="reserved">this</span>,parentEl, config, container);
};
YAHOO.extend(WireIt.util.TerminalOutput, WireIt.Terminal);

</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b>WireIt</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Sat Jan 26 15:17:14 2008</div>
</body>
</html>
